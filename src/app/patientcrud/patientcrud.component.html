<div class="container mt-4">
<h1 class="text-center bg-info p-5">Patient Record Form Action For Add Update & Delete </h1>

<div class="input-group mb-3 mt-5">
    <input type="text" [(ngModel)]="searchText" class="form-control" placeholder="Search by Name or Phone">
  </div>
  <div>
    <!--Submit form-->
    <div class="my-3">
    <form [formGroup]="formpatient" class="mx-5">
       
        <input type="text"  placeholder="Enter FullName" formControlName="fullName">

        <input type="text" placeholder="Enter Email" formControlName="email">
    
        <input type="text" placeholder="Enter Phone" formControlName="phone">
      
        <input type="text" placeholder="Enter Gender" formControlName="gender">
       
        <input type="date" placeholder="Enter DateOfBirth" formControlName="dateOfBirth">

        <button *ngIf="isFormEmpty()" class="btn btn-primary mx-3"  type="button" (click)="AddPatient()" > Register </button>
        <button *ngIf="!isFormEmpty()"  class="btn btn-warning mx-3" type="button" (click)="updatePatient()" > Update </button>
        <button type="button" class="btn btn-secondary" (click)="resetForm()">Clear</button>
    </form>  
</div>
</div>
    <!-- Patient  List -->
    <ul class="list-group mb-3">
        <li class="list-group-item d-flex justify-content-between align-items-center" *ngFor="let pat of paginatedPatints">
          <div>
            <strong>{{ pat.fullName }}</strong> | <span *ngIf="pat.email"> | {{ pat.email}} </span> | <span> {{ pat.phone }} </span>
          </div>
          <div>
            <button class="btn btn-sm btn-info me-2" (click)="editPatient(pat)" > <i class="bi bi-pencil-fill"></i>  Edit</button>
            <button class="btn btn-sm btn-danger" (click)="deletePatientById(pat.id!)" > <i class="bi bi-trash-fill"></i>  Delete</button>
          </div>
        </li>
      </ul>

        <!-- Pagination -->
  <nav *ngIf="totalPages > 1">
    <ul class="pagination justify-content-center">
      <li class="page-item" [class.disabled]="page === 1">
        <button class="page-link" (click)="page = page - 1">Previous</button>
      </li>
      <li class="page-item" *ngFor="let i of [].constructor(totalPages); let idx = index" [class.active]="page === idx + 1">
        <button class="page-link" (click)="page = idx + 1">{{ idx + 1 }}</button>
      </li>
      <li class="page-item" [class.disabled]="page === totalPages">
        <button class="page-link" (click)="page = page + 1">Next</button>
      </li>
    </ul>
  </nav>
</div>