<div class="container-fluid mt-4">
<h1 class="text-center bg-info p-5">Patient Record Form Action For Add Update & Delete </h1>

<div class="input-group  w-50  my-4 mx-5">
  <strong class="mt-2">Search On Box:</strong>  <input type="text" [(ngModel)]="searchText" class="form-control border-info w-50" placeholder="Search by ID, Name or Phone">
  </div>
    <!--Submit form-->
    <form [formGroup]="formpatient" class="m-3">
       <div class="row g-sm-2 border-info bg-info-subtle">
       <div class="col-md-3"> <input type="text" class="form-control" placeholder="Enter FullName" formControlName="fullName"> </div>

       <div class="col-md-3"> <input type="text" class="form-control" placeholder="Enter Email" formControlName="email"> </div>
    
         <div class="col-md-2"> <input type="number" class="form-control" placeholder="Enter Phone" formControlName="phone"> </div>
      
        <div class="col-md-2">  
        
          <select  class="form-select" aria-label="Select Gender" formControlName="gender">
            <option value="" disabled selected hidden>Select gender</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>

        </select>
        </div>
       
       <div class="col-md-2">   <input type="date" class="form-control" placeholder="Enter DateOfBirth" formControlName="dateOfBirth"> </div>
       <div class="mt-3 text-end">

        <button *ngIf="!isActive" class="btn btn-primary mx-3"  type="button" (click)="AddPatient()" > Register </button>
        <button *ngIf="isActive"  class="btn btn-warning mx-3" type="button" (click)="updatePatient()" > Update </button>
        <button type="button" class="btn btn-secondary" (click)="resetForm()">Clear</button>
        </div>
        </div> 
    </form>  

    <!-- Patient  List -->
    <ul class="list-group mb-3">
        <li class="list-group-item d-flex justify-content-between align-items-center" *ngFor="let pat of paginatedPatints">

          <div class="col-md-2"><strong>PatientID:</strong> {{ pat.id}}</div>
         <div class="col-md-2"><strong>PatientName:</strong> {{ pat.fullName }}</div>
         <div class="col-md-2"><strong>PatientName:</strong> {{ pat.gender }}</div>
         <div class="col-md-2"><strong>PhoneNumber:</strong> {{ pat.phone }}</div>
          <div class="col-md-2"><strong>EmailAddress:</strong> {{ pat.email}}</div>
          
          
          <div class="col-md-2 text-end">
            <button class="btn btn-sm btn-info me-2" (click)="editPatient(pat)" > <i class="bi bi-pencil-fill"></i>  Edit</button>
            <button class="btn btn-sm btn-danger" (click)="deletePatientById(pat.id!)" > <i class="bi bi-trash-fill"></i>  Delete</button>
          </div>
        </li>
      </ul>

        <!-- Pagination -->
  <nav *ngIf="totalPages > 1">
    <ul class="pagination justify-content-center">
      <li class="page-item" [class.disabled]="page === 1">
        <button class="page-link" (click)="page = page - 1">Previous</button>
      </li>
      <li class="page-item" *ngFor="let i of [].constructor(totalPages); let idx = index" [class.active]="page === idx + 1">
        <button class="page-link" (click)="page = idx + 1">{{ idx + 1 }}</button>
      </li>
      <li class="page-item" [class.disabled]="page === totalPages">
        <button class="page-link" (click)="page = page + 1">Next</button>
      </li>
    </ul>
  </nav>
</div>