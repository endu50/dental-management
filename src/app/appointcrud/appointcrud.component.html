<div class="container-fluid mt-3">
<h1 class="text-center bg-success p-4">Appointment Add Edit and Delete Form Page </h1>
<!-- Search -->
<div class="input-group mb-3 mt-5 w-50">
    <input type="text" [(ngModel)]="searchText" class="form-control border-info mx-3" placeholder="Search by name or treatment" name="searchText">
     <strong>SearchBy Appoint Date:</strong><input type="datetime-local" [(ngModel)]="searchDate" class="form-control border-info mx-1" 
     placeholder="Search by Date" name="searchDate">
     <button type="button" class="btn btn-secondary m-2" (click)="onClear()">Clear</button>
  </div>
  <div class="input-group mb-3 mt-4 w-25">
   
  </div>
  
  <!-- Appointment Form -->
  <form [formGroup]="appointForm" (ngSubmit)="onSubmit()" class="mb-4">
    <div class="row g-2">
      <div class="col-md-2"><input class="form-control" placeholder="Patient Name" formControlName="patientName"></div>
      <div class="col-md-3"><input class="form-control" type="date" formControlName="appointmentDate"></div>
      <div class="col-md-3"><input class="form-control" placeholder="Treatment" formControlName="treatmentType"></div>
      <div class="col-md-2"><input class="form-control" placeholder="Dentist Name" formControlName="dentistName"></div>
        <div class="col-md-2"><input class="form-control border-danger" placeholder="Status: pending,canceled,completed" formControlName="status"></div>
    </div>
    <div class="mt-3 text-end">
      <button type="submit" class="btn btn-primary me-2">{{ isEditMode ? 'Update' : 'Add' }}</button>
      <button type="button" class="btn btn-secondary" (click)="resetForm()">Clear</button>
    </div>
  </form>
 <div class="container-fluid mt-4">
  <div class="row">
    <!-- Appointment List -->
    <ul class="list-group mb-3">
      <li class="list-group-item" *ngFor="let appt of paginatedAppointments">
        <div class="row align-items-center">
          <div class="col-md-2"><strong>PatientName:</strong> {{ appt.patientName }}</div>
          <div class="col-md-2"><strong>AppointmentDate:</strong> {{ appt.appointmentDate | date }}</div>
          <div class="col-md-2"><strong>TreatmentType:</strong> {{ appt.treatmentType }}</div>
          <div class="col-md-2"><strong>Dentist:</strong> {{ appt.dentistName }}</div>
          <div class="col-md-2">
            <strong>AppointmentStatus:</strong> 
            <span [ngClass]="{
              'text-success': appt.status === 'completed',
              'text-warning': appt.status === 'pending',
              'text-danger': appt.status === 'canceled'
            }">
              {{ appt.status }}
            </span>
          </div>
          <div class="col-md-2 text-end">
            <button class="btn btn-sm btn-info me-2" (click)="editAppointment(appt)">
              <i class="bi bi-pencil-fill"></i> Edit
            </button>
            <button class="btn btn-sm btn-danger" (click)="deleteAppointment(appt.appointId!)">
              <i class="bi bi-trash-fill"></i> Delete
            </button>
          </div>
        </div>
      </li>
    </ul>
  </div>
</div>

  <!-- Pagination -->
  <nav *ngIf="totalPages > 1">
    <ul class="pagination justify-content-center">
      <li class="page-item" [class.disabled]="page === 1">
        <button class="page-link" (click)="page = page - 1">Previous</button>
      </li>
      <li class="page-item" *ngFor="let i of [].constructor(totalPages); let idx = index" [class.active]="page === idx + 1">
        <button class="page-link" (click)="page = idx + 1">{{ idx + 1 }}</button>
      </li>
      <li class="page-item" [class.disabled]="page === totalPages">
        <button class="page-link" (click)="page = page + 1">Next</button>
      </li>
    </ul>
  </nav>
  </div>